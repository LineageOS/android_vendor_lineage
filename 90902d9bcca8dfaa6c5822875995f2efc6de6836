{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4e4cab6d_9da08996",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 18796
      },
      "writtenOn": "2022-05-14T17:54:16Z",
      "side": 1,
      "message": "Tested on alioth, no more phone service location indicator",
      "revId": "90902d9bcca8dfaa6c5822875995f2efc6de6836",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "40c2e29b_93154507",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 18796
      },
      "writtenOn": "2022-05-15T12:32:25Z",
      "side": 1,
      "message": "\u003e Patch Set 5:\n\u003e \n\u003e Before adding such a workaround, I\u0027d suggest what exactly is causing those location requests in the first place. Is it something we have control over (IOW, build from source), or is it some QCOM blob running under the telephony service UID?\n\nI think its related to this, not sure though. it was merged in May SP .\nhttps://github.com/LineageOS/android_frameworks_base/commit/abb41637225c95d5530bff275531a446be66a18c",
      "revId": "90902d9bcca8dfaa6c5822875995f2efc6de6836",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c15aede6_805fbf19",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 29415
      },
      "writtenOn": "2022-05-17T14:30:49Z",
      "side": 1,
      "message": "\u003e Patch Set 5:\n\u003e \n\u003e I somewhat doubt it\u0027s related to that. That patch just removes location info from the service state broadcast for receivers not holding the location permission, it doesn\u0027t change anything regarding location requests.\n\nAfter reverting the commit in question, I have gotten zero location requests from Phone Services.",
      "revId": "90902d9bcca8dfaa6c5822875995f2efc6de6836",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d15b87a1_933a83a1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1063
      },
      "writtenOn": "2022-05-17T15:08:02Z",
      "side": 1,
      "message": "Interesting. On a first glance, that broadcast should only cause the location app op to be \u0027noted\u0027, not \u0027started\u0027 (the latter being the state recorded by the location indicator). I\u0027ll investigate this.",
      "revId": "90902d9bcca8dfaa6c5822875995f2efc6de6836",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fc8445bd_3f6dbdb7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1063
      },
      "writtenOn": "2022-05-18T07:53:26Z",
      "side": 1,
      "message": "Looks I was right about the broadcast only causes the location access to be \u0027noted\u0027, but it also looks like that\u0027s sufficient to show the location indicator (-\u003e https://github.com/LineageOS/android_frameworks_base/blob/lineage-19.1/packages/SystemUI/src/com/android/systemui/appops/AppOpsControllerImpl.java#L417).\n\nIt still feels somewhat weird to me that passive reception of a broadcast causes the same visual outcome in SystemUI as an active access (e.g. registering a location listener), but I guess that\u0027s the way it\u0027s intended to work, so this patch seems correct.",
      "revId": "90902d9bcca8dfaa6c5822875995f2efc6de6836",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    }
  ]
}